# MicroKernel Cross-Compilation Configuration
# 用于 x86_64 bare-metal (freestanding) 目标的 Meson 交叉编译配置
#
# 使用方法:
#   meson setup build --cross-file cross/x86_64-none.ini
#

[binaries]
c = 'gcc'
ar = 'ar'
strip = 'strip'
ld = 'ld'
objcopy = 'objcopy'
objdump = 'objdump'

# 如果使用交叉编译工具链，取消注释并修改以下行:
# c = 'x86_64-elf-gcc'
# ar = 'x86_64-elf-ar'
# strip = 'x86_64-elf-strip'
# ld = 'x86_64-elf-ld'
# objcopy = 'x86_64-elf-objcopy'
# objdump = 'x86_64-elf-objdump'

[built-in options]
c_args = ['-ffreestanding', '-nostdlib', '-nostdinc', '-fno-builtin', '-fno-stack-protector', '-mno-red-zone', '-mno-mmx', '-mno-sse', '-mno-sse2', '-mno-sse3', '-mno-3dnow', '-m64', '-mcmodel=kernel', '-fno-pic', '-fno-pie']
c_link_args = ['-nostdlib', '-static', '-Wl,--build-id=none', '-Wl,-z,max-page-size=0x1000', '-Wl,-z,common-page-size=0x1000']

[host_machine]
system = 'none'
cpu_family = 'x86_64'
cpu = 'x86_64'
endian = 'little'

[properties]
needs_exe_wrapper = false
